#PyBot:
 name: @TooEasyTraveBot

 short_name: EasyTravel

 url: t.me/TooEasyTraveBot
#Краткое описание всего кода:
####Импорт всех нужных для работы модулей:
    import loader
    from handlers import main_handler
####Проверка на запуск файла напрямую:
    if __name__ == '__main__': 

####Основной код:
    try:

		bot_cls = loader.load()
		bot = bot_cls.get_bot()
		interface = loader.ui_set()
		loader.load_db()
		main_handler(bot, interface)

		bot.polling()
	except BaseException as er:
		print(er)



###Описание loader:
####Импорт всех нужных частей:
    import telebot
    import os
    from database import *
    from UI import UI
    from telebot import types
    from dotenv import load_dotenv
####Функции:
load - загружает токен и возвращает бота
ui_set - загружает интерфейс
load_db - подгружает базу данных
####Классы:
TeleBot - собственно сам бот
###Описание token.env:
    ----> Содержит токен бота <----
###Код token.env:
    token='5107074730:AAEELwRJ6B0hjGwguvmaJmcFUUnwtA81q4U'

#Описание UI:
Модуль который содержит в себе класс UI который может содержать в себе 
весь интерфейс
##Описание модуля rapidapi:
###Функции и классы:
NoneError - дочерний класс от BaseException созданный для выдавания ошибок в случае сбоя работы программы

Метод getter - очень полезный метод который принимает в себя Массив: Словарь, И ключи: Список из чисел или строк.   
Возвращает найденный по ключу результат

get_massive - возвращает массив с отелями в введённом городе

get_photos - возвращает N фото введённого отеля

gener_hotels - функция-генератор которая сортирует массив который вернула функция get_massive и создаёт информацию о отелях
                                          
get_city - возвращает город

key - метод нужный для сортировки результата от API

sort - универсальный метод который может сортировать, от меньшего к большему, от большего к меньшему, и по критериям
использует key() в качестве вспомогательного инструмента для функции-лямбды
###Описание handlers:
####Импорт нужных модулей:
    from telebot import types
    from rapidapi import *
####CommandError - дочерний от BaseException класс который создан для выдачи ошибок 
    class CommandError(BaseException):
	    pass
####main_handler - главная функция хендлер которая принимает в себя информацию о всех сообщениях, обрабатывает всю информацию и комманды.
###Хэндлеры:
##help_info():
    Хэндлер созданный для помощи в использовании бота, после написания /help это сообщение попадает в хендлер и выводит ReplyKeyboardMarkup 
    В котором можно узнать про функции комманд и кнопок
##reply_func():
    Хэндлер предназначенный для работы с help_info и который собственно выводин информацию о коммандах бота
##start_func()
    Хэндлер созданный для обработки приветствия с пользователем и начальным выводом главного меню для подальшей работы
###Дальше идёт череда основных хендлеров которые созданны для работы с API и выводом отелей::
##func_choose()
    Хэндлер который принимает в себя множество комманд и в зависимости от них действует дальше, если в хэндлер попало /find-hotels_или /next
    когда пользователь продолжает работу после next_h то хэндлер вызывает себя ещё раз чтобы узнать комманду для бота. Если попадает /lowprice, 
    /highprice, /bestdeal или /history сразу начинает работоу пропуская этап с рекурсией
    Бот просит пользователя ввести нужный город
##get_cities()
    Хэндлер идущий после func_choose(), принимает в себя строку , которую проверяет регуляторным выражением и если строка подходит 
    бот просит уточнение , какой именно город с помощью InlineKeyboardMarkup если же строка не подходит бот просит ввести новую
##n_input()
    Хэндлер идущий после get_cities(), принимает callback с информацией, затем обрабатывает её и передаёт в следуйщий хэндлер
    Бот спрашивает колчество отелей
#После n_input() идёт развилка, если функция не bestdeal переходим к финальному этапу а если bestdeal ещё пару хэндлеров
##optional_func()
    Хэндлер для bestdeal сначала проверяет входящую строку на 'правильность' и затем Бот спрашивает максимальную стоимость
    или просит повторить попытку
##optional_dist()
    Хэндлер также нужный для bestdeal проверяет входящюю строку на 'правильность' и затем Бот спрашивает максимальную дистанцию до центра города
    или просит повторить попытку 
##funal_result()
    важнейший хэндлер, который проверяет входящюю строку на 'правильность'. Но он проверяет или строку из n_input()
    или строку из optional_dist() и в зависимости от функции меняются аргументы и проверка.
    После этого идёт получение информации об отелях и её сортировка, затем вывод информации
    Бот спрашивает закончить или продолжить работу с отелями
##next_h()
    последний хэндлер который обрабатывает ответ пользователя и либо продолжает работу либо выводит главное меню
####database.py
    В этом модуле обработка базы данных и методы для получения и записи информации собственно
    Я незнаю правильно ли я тут всё сделал но она работает и всё стабильно.
####Вообще в коде есть пару недоработок к примеру там где ReplyMarkup бот не проверяет написанное потому что ожидает ответ из этих кнопок, но я это в будущем доработаю
####У меня код работает очень быстро за исключением раюоты с API а так всё идеально и мгновенно, все функции кроме истории должны работать я проверял не один раз, базу данных ещё не встроил в бота

    